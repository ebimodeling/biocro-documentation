<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Convenience Functions for Partial Application — partial_application • BioCro</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Convenience Functions for Partial Application — partial_application"><meta property="og:description" content="Convenience functions for using partial application with BioCro"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">BioCro</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">3.0.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/pdf_vignette_index.html">PDF Vignettes</a>
    </li>
  </ul></li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/ebimodeling/biocro/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Convenience Functions for Partial Application</h1>
    
    <div class="hidden name"><code>partial_application.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Convenience functions for using partial application with BioCro</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="fu">partial_run_biocro</span><span class="op">(</span>
    initial_values <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="op">)</span>,
    parameters <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="op">)</span>,
    <span class="va">drivers</span>,
    direct_module_names <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="op">)</span>,
    differential_module_names <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="op">)</span>,
    ode_solver <span class="op">=</span> <span class="fu">BioCro</span><span class="fu">:::</span><span class="va">default_ode_solver</span>,
    <span class="va">arg_names</span>,
    verbose <span class="op">=</span> <span class="cn">FALSE</span>
<span class="op">)</span>

<span class="fu">partial_evaluate_module</span><span class="op">(</span><span class="va">module_name</span>, <span class="va">input_quantities</span>, <span class="va">arg_names</span><span class="op">)</span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>arg_names</dt>
<dd><p>A vector of strings specifying input quantities whose values should not be
    fixed when using partial application.</p></dd>
<dt>initial_values</dt>
<dd><p>Identical to the corresponding argument from <code><a href="run_biocro.html">run_biocro</a></code>.</p></dd>
<dt>parameters</dt>
<dd><p>Identical to the corresponding argument from <code><a href="run_biocro.html">run_biocro</a></code>.</p></dd>
<dt>drivers</dt>
<dd><p>Identical to the corresponding argument from <code><a href="run_biocro.html">run_biocro</a></code>.</p></dd>
<dt>direct_module_names</dt>
<dd><p>Identical to the corresponding argument from <code><a href="run_biocro.html">run_biocro</a></code>.</p></dd>
<dt>differential_module_names</dt>
<dd><p>Identical to the corresponding argument from <code><a href="run_biocro.html">run_biocro</a></code>.</p></dd>
<dt>ode_solver</dt>
<dd><p>Identical to the corresponding argument from <code><a href="run_biocro.html">run_biocro</a></code>.</p></dd>
<dt>verbose</dt>
<dd><p>Identical to the corresponding argument from <code><a href="run_biocro.html">run_biocro</a></code>.</p></dd>
<dt>module_name</dt>
<dd><p>Identical to the corresponding argument from <code><a href="modules.html">evaluate_module</a></code>.</p></dd>
<dt>input_quantities</dt>
<dd><p>A list of named numeric elements representing any input quantities required
    by the module that are not included in <code>arg_names</code>; any extraneous
    quantities will be ignored by the module.</p></dd>
</dl></div>
    <div id="details">
    <h2>Details</h2>
    <p><em>Partial application</em> is the technique of fixing some of the input
  arguments to a function, producing a new function with fewer inputs. In the
  context of BioCro, partial application can often be useful while varying some
  parameters, initial values, or drivers while performing optimization or
  sensitivity analysis. Optimizers (such as <code><a href="https://rdrr.io/r/stats/optim.html" class="external-link">optim</a></code>)
  typically require a function with a single input argument, so the partial
  application tools provided here help to create such functions.</p>
<p>Both <code>partial_run_biocro</code> and <code>partial_evaluate_module</code> accept the
  same arguments as their "regular" counterparts (<code><a href="run_biocro.html">run_biocro</a></code> and
  <code><a href="modules.html">evaluate_module</a></code>) with the addition of <code>arg_names</code>, which
  specifies the input quantities that should not be fixed.</p>
<p>For <code>partial_run_biocro</code>, each element of <code>arg_names</code> must be the
  name of a quantity that is one of the <code>initial_values</code>,
  <code>parameters</code>, or <code>drivers</code>. For <code>partial_evaluate_module</code>, each
  element of <code>arg_names</code> must be the name of one of the module's input
  quantities.</p>
<p>When using one of the pre-defined crop growth models, it may be helpful to
  use the <code>with</code> command to pass arguments to <code>partial_run_biocro</code>;
  see the documentation for <code><a href="crop_model_definitions.html">crop_model_definitions</a></code> for more
  information.</p>
    </div>
    <div id="value">
    <h2>Value</h2>
    <dl><dt>partial_run_biocro</dt>
<dd><p>A function that calls <code><a href="run_biocro.html">run_biocro</a></code> with all of the inputs
    (except those specified in <code>arg_names</code>) set to the values specified by
    the original call to <code>partial_run_biocro</code>. The new function has one
    input (<code>x</code>), which can be a vector or list specifying the values of the
    quantities in <code>arg_names</code>. If <code>x</code> has no names, its elements must
    be supplied in the same order as in the original <code>arg_names</code>. If
    <code>x</code> has names, they must be identical to the elements of
    <code>arg_names</code> but can be in any order. Elements of <code>x</code> corresponding
    to drivers must be vectors having the same length as the other drivers; they
    can be specified as a named element of a list or as sequential elements of
    a vector without names. The return value of the new function is a data frame
    as would be produced by <code><a href="run_biocro.html">run_biocro</a></code>.</p></dd>
<dt>partial_evaluate_module</dt>
<dd><p>A function that calls <code><a href="modules.html">evaluate_module</a></code> with the input
    quantities (except those specified in <code>arg_names</code>) set to the values
    specified by the original call to <code>partial_evaluate_module</code>. The new
    function has one input (<code>x</code>), which can be a vector or list specifying
    the values of the quantities in <code>arg_names</code>. If <code>x</code> has no names,
    its elements must be supplied in the same order as in the original
    <code>arg_names</code>. If <code>x</code> has names, they must be identical to the
    elements of <code>arg_names</code> but can be in any order. The return value of
    the new function is a list with two elements (<code>inputs</code> and
    <code>outputs</code>), each of which is a list of named numeric elements
    representing the module's input and output values. (Note that this differs
    from the output of <code>evaluate_module</code>, which only returns the outputs.)</p></dd>
</dl></div>
    <div id="see-also">
    <h2>See also</h2>
    <div class="dont-index"><p></p><ul><li><p><code><a href="run_biocro.html">run_biocro</a></code></p></li>
<li><p><code><a href="modules.html">evaluate_module</a></code></p></li>
</ul></div>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span class="co"># Example 1: varying the thermal time values at which senescence starts for</span></span>
<span class="r-in"><span class="co"># different organs in a simulation; here we set them to the following values</span></span>
<span class="r-in"><span class="co"># instead of the defaults:</span></span>
<span class="r-in"><span class="co">#  - seneLeaf: 2000 degrees C * day</span></span>
<span class="r-in"><span class="co">#  - seneStem: 2100 degrees C * day</span></span>
<span class="r-in"><span class="co">#  - seneRoot: 2200 degrees C * day</span></span>
<span class="r-in"><span class="co">#  - seneRhizome: 2300 degrees C * day</span></span>
<span class="r-in"><span class="va">senescence_simulation</span> <span class="op">&lt;-</span> <span class="fu">partial_run_biocro</span><span class="op">(</span></span>
<span class="r-in">  <span class="va">miscanthus_x_giganteus</span><span class="op">$</span><span class="va">initial_values</span>,</span>
<span class="r-in">  <span class="va">miscanthus_x_giganteus</span><span class="op">$</span><span class="va">parameters</span>,</span>
<span class="r-in">  <span class="fu"><a href="get_growing_season_climate.html">get_growing_season_climate</a></span><span class="op">(</span><span class="va">weather</span><span class="op">$</span><span class="st">'2005'</span><span class="op">)</span>,</span>
<span class="r-in">  <span class="va">miscanthus_x_giganteus</span><span class="op">$</span><span class="va">direct_modules</span>,</span>
<span class="r-in">  <span class="va">miscanthus_x_giganteus</span><span class="op">$</span><span class="va">differential_modules</span>,</span>
<span class="r-in">  <span class="va">miscanthus_x_giganteus</span><span class="op">$</span><span class="va">ode_solver</span>,</span>
<span class="r-in">  <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'seneLeaf'</span>, <span class="st">'seneStem'</span>, <span class="st">'seneRoot'</span>, <span class="st">'seneRhizome'</span><span class="op">)</span></span>
<span class="r-in"><span class="op">)</span></span>
<span class="r-in"><span class="va">senescence_result</span> <span class="op">&lt;-</span> <span class="fu">senescence_simulation</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2000</span>, <span class="fl">2100</span>, <span class="fl">2200</span>, <span class="fl">2300</span><span class="op">)</span><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># Example 2: a crude method for simulating the effects of climate change; here</span></span>
<span class="r-in"><span class="co"># we increase the atmospheric CO2 concentration to 500 ppm and the temperature</span></span>
<span class="r-in"><span class="co"># by 2 degrees C relative to 2002 temperatures. The commands below that call</span></span>
<span class="r-in"><span class="co"># `temperature_simulation` all produce the same result.</span></span>
<span class="r-in"><span class="va">temperature_simulation</span> <span class="op">&lt;-</span> <span class="fu">partial_run_biocro</span><span class="op">(</span></span>
<span class="r-in">  <span class="va">soybean</span><span class="op">$</span><span class="va">initial_values</span>,</span>
<span class="r-in">  <span class="va">soybean</span><span class="op">$</span><span class="va">parameters</span>,</span>
<span class="r-in">  <span class="va">soybean_weather</span><span class="op">$</span><span class="st">'2002'</span>,</span>
<span class="r-in">  <span class="va">soybean</span><span class="op">$</span><span class="va">direct_modules</span>,</span>
<span class="r-in">  <span class="va">soybean</span><span class="op">$</span><span class="va">differential_modules</span>,</span>
<span class="r-in">  <span class="va">soybean</span><span class="op">$</span><span class="va">ode_solver</span>,</span>
<span class="r-in">  <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Catm"</span>, <span class="st">"temp"</span><span class="op">)</span></span>
<span class="r-in"><span class="op">)</span></span>
<span class="r-in"><span class="va">hot_result_1</span> <span class="op">&lt;-</span> <span class="fu">temperature_simulation</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">500</span>, <span class="va">soybean_weather</span><span class="op">$</span><span class="st">'2002'</span><span class="op">$</span><span class="va">temp</span> <span class="op">+</span> <span class="fl">2.0</span><span class="op">)</span><span class="op">)</span></span>
<span class="r-in"><span class="va">hot_result_2</span> <span class="op">&lt;-</span> <span class="fu">temperature_simulation</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>Catm <span class="op">=</span> <span class="fl">500</span>, temp <span class="op">=</span> <span class="va">soybean_weather</span><span class="op">$</span><span class="st">'2002'</span><span class="op">$</span><span class="va">temp</span> <span class="op">+</span> <span class="fl">2.0</span><span class="op">)</span><span class="op">)</span></span>
<span class="r-in"><span class="va">hot_result_3</span> <span class="op">&lt;-</span> <span class="fu">temperature_simulation</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>temp <span class="op">=</span> <span class="va">soybean_weather</span><span class="op">$</span><span class="st">'2002'</span><span class="op">$</span><span class="va">temp</span> <span class="op">+</span> <span class="fl">2.0</span>, Catm <span class="op">=</span> <span class="fl">500</span><span class="op">)</span><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># Note that these commands will both produce errors:</span></span>
<span class="r-in"><span class="co"># hot_result_4 &lt;- temperature_simulation(c(Catm = 500, temp = soybean_weather$'2002'$temp + 2.0))</span></span>
<span class="r-in"><span class="co"># hot_result_5 &lt;- temperature_simulation(setNames(</span></span>
<span class="r-in"><span class="co">#   c(500, soybean_weather$'2002'$temp + 2.0),</span></span>
<span class="r-in"><span class="co">#   c("Catm", rep("temp", length(soybean_weather$'2002'$temp)))</span></span>
<span class="r-in"><span class="co"># ))</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># Note that this command will produce a strange result where the first</span></span>
<span class="r-in"><span class="co"># temperature value will be incorrectly interpreted as a `Catm` value, and the</span></span>
<span class="r-in"><span class="co"># `Catm` value will be interpreted as the final temperature value.</span></span>
<span class="r-in"><span class="co"># hot_result_6 &lt;- temperature_simulation(c(soybean_weather$'2002'$temp + 2.0, 500))</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># Example 3: varying the base and air temperature inputs to the</span></span>
<span class="r-in"><span class="co"># 'thermal_time_linear' module from the 'BioCro' module library. The commands</span></span>
<span class="r-in"><span class="co"># below that call `thermal_time_rate` all produce the same result.</span></span>
<span class="r-in"><span class="va">thermal_time_rate</span> <span class="op">&lt;-</span> <span class="fu">partial_evaluate_module</span><span class="op">(</span></span>
<span class="r-in">  <span class="st">'BioCro:thermal_time_linear'</span>,</span>
<span class="r-in">  <span class="fu"><a href="https://rdrr.io/r/base/with.html" class="external-link">within</a></span><span class="op">(</span><span class="va">miscanthus_x_giganteus</span><span class="op">$</span><span class="va">parameters</span>, <span class="op">{</span><span class="va">time</span> <span class="op">=</span> <span class="fl">1</span><span class="op">}</span><span class="op">)</span>,</span>
<span class="r-in">  <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"temp"</span>, <span class="st">"tbase"</span><span class="op">)</span></span>
<span class="r-in"><span class="op">)</span></span>
<span class="r-in"><span class="va">rate_result_1</span> <span class="op">&lt;-</span> <span class="fu">thermal_time_rate</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">25</span>, <span class="fl">10</span><span class="op">)</span><span class="op">)</span></span>
<span class="r-in"><span class="va">rate_result_2</span> <span class="op">&lt;-</span> <span class="fu">thermal_time_rate</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>temp <span class="op">=</span> <span class="fl">25</span>, tbase <span class="op">=</span> <span class="fl">10</span><span class="op">)</span><span class="op">)</span></span>
<span class="r-in"><span class="va">rate_result_3</span> <span class="op">&lt;-</span> <span class="fu">thermal_time_rate</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>tbase <span class="op">=</span> <span class="fl">10</span>, temp <span class="op">=</span> <span class="fl">25</span><span class="op">)</span><span class="op">)</span></span>
<span class="r-in"><span class="va">rate_result_4</span> <span class="op">&lt;-</span> <span class="fu">thermal_time_rate</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>temp <span class="op">=</span> <span class="fl">25</span>, tbase <span class="op">=</span> <span class="fl">10</span><span class="op">)</span><span class="op">)</span></span>
<span class="r-in"><span class="va">rate_result_5</span> <span class="op">&lt;-</span> <span class="fu">thermal_time_rate</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>tbase <span class="op">=</span> <span class="fl">10</span>, temp <span class="op">=</span> <span class="fl">25</span><span class="op">)</span><span class="op">)</span></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by McGrath Justin M., Lochocki Edward B., Rohde Scott, Jaiswal Deepak, Matthews Megan L., Miguez Fernando E., Long Stephen P..</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.3.</p>
</div>

      </footer></div>

  


  

  </body></html>

