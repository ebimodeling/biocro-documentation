<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Define and modify BioCro module test case files — module_case_files • BioCro</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Define and modify BioCro module test case files — module_case_files"><meta property="og:description" content="Test cases for testing modules can be stored in files. The functions
  here provide ways to create and update those files.
initialize_csv helps define test cases for module testing by
  initializing the csv file for one module based on either a set of
  default input values or user-supplied ones.
add_csv_row helps define test cases for module testing by adding one
  test case to a module's csv file based on the user-supplied inputs and
  description.
update_csv_cases helps define cases for module testing by updating the
  expected output values for each case stored in a module's csv file."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">BioCro</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">3.0.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/pdf_vignette_index.html">PDF Vignettes</a>
    </li>
  </ul></li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/ebimodeling/biocro/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Define and modify BioCro module test case files</h1>
    
    <div class="hidden name"><code>module_case_files.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Test cases for testing modules can be stored in files. The functions
  here provide ways to create and update those files.</p>
<p><code>initialize_csv</code> helps define test cases for module testing by
  initializing the <code>csv</code> file for one module based on either a set of
  default input values or user-supplied ones.</p>
<p><code>add_csv_row</code> helps define test cases for module testing by adding one
  test case to a module's <code>csv</code> file based on the user-supplied inputs and
  description.</p>
<p><code>update_csv_cases</code> helps define cases for module testing by updating the
  expected output values for each case stored in a module's csv file.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="fu">initialize_csv</span><span class="op">(</span>
    <span class="va">module_name</span>,
    <span class="va">directory</span>,
    nonstandard_inputs <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="op">)</span>,
    description <span class="op">=</span> <span class="st">"automatically-generated test case"</span>,
    overwrite <span class="op">=</span> <span class="cn">FALSE</span>
  <span class="op">)</span>

  <span class="fu">add_csv_row</span><span class="op">(</span><span class="va">module_name</span>, <span class="va">directory</span>, <span class="va">inputs</span>, <span class="va">description</span><span class="op">)</span>

  <span class="fu">update_csv_cases</span><span class="op">(</span><span class="va">module_name</span>, <span class="va">directory</span><span class="op">)</span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>module_name</dt>
<dd><p>A string specifying one BioCro module, formatted like
    <code>library_name:local_module_name</code>, where <code>library_name</code> is the name
    of a library that contains a module with local name
    <code>local_module_name</code>; such fully-qualified module names can be formed
    manually or with <code><a href="module_paste.html">module_paste</a></code>.</p></dd>
<dt>directory</dt>
<dd><p>The directory where module test case files are stored, e.g.
    <code>file.path('tests', 'module_test_cases')</code>.</p></dd>
<dt>inputs</dt>
<dd><p>A list of module inputs, i.e., a list of named numeric elements
    corresponding to the module's input quantities.</p></dd>
<dt>description</dt>
<dd><p>A string describing the test case, e.g. <code>"temp above tbase"</code>. The
    description should be succinct and not contain any newline characters.</p></dd>
<dt>nonstandard_inputs</dt>
<dd><p>An optional list of input quantities whose values will override the default
    value of 1.0; see the <code>inputs</code> entry above.</p></dd>
<dt>overwrite</dt>
<dd><p>A logical value indicating whether an existing file should be overwritten.</p></dd>
</dl></div>
    <div id="details">
    <h2>Details</h2>
    <p>Module test case files form a critical component of BioCro's regression
  testing system. For more details, see the help page for
  <code><a href="module_testing.html">module_testing</a></code>.</p>
<p>The <code>initialize_csv</code> function will evaluate the module for a set of input
  quantities and store the results as a test case <code>csv</code> file. Typically,
  both of its optional arguments can be omitted. However, some modules produce
  errors when all inputs are set to 1.0. In this case, it would be necessary to
  supply some nonstandard inputs and (possibly) an alternate case description.</p>
<p>The <code>add_csv_row</code> function will evaluate the module for a set of input
  quantities, define a test case from the resulting outputs and the description,
  and add it to the module's corresponding <code>csv</code> file. If no <code>csv</code>
  file exists, one will be initialized with the new case.</p>
<p>The <code>update_csv_cases</code> function will evaluate the module for all input
  values specified in its <code>csv</code> case file and update the stored values of
  the corresponding outputs. Any output columns not present in the file will be
  added automatically and filled in with the correct values. Although the output
  columns are optional, the description column must exist in the <code>csv</code>
  file.</p>
<p>If a module test fails and <code>update_csv_cases</code> is used to update the test,
  care should be taken to ensure that the new outputs are sensible. This
  function should not be used to blindly ensure that tests pass, since a test
  failure may indicate a real problem with a module.</p>
<p>Note that <code>update_csv_cases</code> can be used to batch-initialize test cases.
  To do this, manually create a test case <code>csv</code> file with the proper name
  that only includes columns for the inputs and the description; now, calling
  <code>update_csv_cases</code> will automatically fill in the outputs for each case.
  With this method, care must be taken when manually specifying the values of
  the description column; the descriptions must be double quoted, and if they
  contain internal double quotes, those quotes must be doubled. Generally it is
  safest to simply avoid double quotes in the descriptions. (See <code>qmethod</code>
  in the help file for <code><a href="https://rdrr.io/r/utils/write.table.html" class="external-link">write.csv</a></code> for more details about quoting.)</p>
    </div>
    <div id="value">
    <h2>Value</h2>
    <p>A message indicating whether a file was created, overwritten, or not written.</p>
    </div>
    <div id="see-also">
    <h2>See also</h2>
    <div class="dont-index"><p></p><ul><li><p><code><a href="modules.html">modules</a></code></p></li>
<li><p><code><a href="module_paste.html">module_paste</a></code></p></li>
<li><p><code><a href="module_testing.html">module_testing</a></code></p></li>
<li><p><code><a href="test_module_library.html">test_module_library</a></code></p></li>
<li><p><code><a href="test_module.html">test_module</a></code></p></li>
</ul></div>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span class="co"># First, we will initialize a test case file for the 'BioCro' library's</span></span>
<span class="r-in"><span class="co"># 'thermal_time_linear' module, which will be saved in the current directory as</span></span>
<span class="r-in"><span class="co"># 'BioCro_thermal_time_linear.csv'. Then, we will add a new case to the file.</span></span>
<span class="r-in"><span class="co"># Finally, we will update the file. Note that the call to `update_csv_cases`</span></span>
<span class="r-in"><span class="co"># will not actually modify the file unless it is manually edited beforehand to</span></span>
<span class="r-in"><span class="co"># change an input or output value.</span></span>
<span class="r-in"><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span></span>
<span class="r-in"><span class="fu">initialize_csv</span><span class="op">(</span></span>
<span class="r-in">  <span class="st">'BioCro:thermal_time_linear'</span>,</span>
<span class="r-in">  <span class="st">'.'</span>,</span>
<span class="r-in">  nonstandard_inputs <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>temp <span class="op">=</span> <span class="op">-</span><span class="fl">1</span><span class="op">)</span>,</span>
<span class="r-in">  overwrite <span class="op">=</span> <span class="cn">TRUE</span></span>
<span class="r-in"><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="fu">add_csv_row</span><span class="op">(</span></span>
<span class="r-in">  <span class="st">'BioCro:thermal_time_linear'</span>,</span>
<span class="r-in">  <span class="st">'.'</span>,</span>
<span class="r-in">  <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>time <span class="op">=</span> <span class="fl">101</span>, sowing_time <span class="op">=</span> <span class="fl">100</span>, tbase <span class="op">=</span> <span class="fl">20</span>, temp <span class="op">=</span> <span class="fl">44</span><span class="op">)</span>,</span>
<span class="r-in">  <span class="st">'temp above tbase'</span></span>
<span class="r-in"><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="fu">update_csv_cases</span><span class="op">(</span><span class="st">'BioCro:thermal_time_linear'</span>, <span class="st">'.'</span><span class="op">)</span></span>
<span class="r-in"><span class="op">}</span></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by McGrath Justin M., Lochocki Edward B., Rohde Scott, Jaiswal Deepak, Matthews Megan L., Miguez Fernando E., Long Stephen P..</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.3.</p>
</div>

      </footer></div>

  


  

  </body></html>

